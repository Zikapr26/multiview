<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>MultiView Pro - Óptica Pupilent Edition</title>
    <style>
        body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0a0a0a; color: #eee; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* Barra de Topo */
        #header { background: #1a1a1a; padding: 12px 20px; display: flex; gap: 15px; align-items: center; border-bottom: 2px solid #333; box-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        input { background: #000; border: 1px solid #444; color: #fff; padding: 10px; border-radius: 5px; width: 280px; outline: none; transition: 0.3s; }
        input:focus { border-color: #ff0000; }
        button { background: #ff0000; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; text-transform: uppercase; transition: 0.2s; }
        button:hover { background: #b30000; transform: scale(1.05); }
        .chat-selector { border-left: 1px solid #444; padding-left: 15px; display: flex; align-items: center; gap: 8px; }
        .btn-chat { background: #333; font-size: 11px; padding: 8px 12px; }
        .btn-chat.active { background: #065fd4; }

        /* Área de Conteúdo */
        #workspace { display: flex; flex: 1; width: 100%; height: calc(100vh - 65px); }
        
        /* Coluna dos Vídeos */
        #video-stack { display: flex; flex-direction: column; flex: 1; background: #000; }
        .video-slot { flex: 1; position: relative; border-bottom: 1px solid #222; }
        iframe { width: 100%; height: 100%; border: none; }

        /* Coluna do Chat */
        #chat-sidebar { width: 380px; background: #0f0f0f; border-left: 2px solid #333; display: flex; flex-direction: column; }
        #chat-label { padding: 12px; background: #1a1a1a; font-size: 13px; font-weight: bold; border-bottom: 1px solid #333; text-align: center; color: #aaa; }
    </style>
</head>
<body>

    <div id="header">
        <input type="text" id="linkA" placeholder="Cole o Link 1 aqui...">
        <input type="text" id="linkB" placeholder="Cole o Link 2 aqui...">
        <button onclick="iniciar()">CARREGAR TUDO</button>

        <div class="chat-selector">
            <span style="font-size: 11px; color: #888;">CHAT:</span>
            <button id="cBtn1" class="btn-chat active" onclick="trocarChat(1)">LIVE 1</button>
            <button id="cBtn2" class="btn-chat" onclick="trocarChat(2)">LIVE 2</button>
        </div>
    </div>

    <div id="workspace">
        <div id="video-stack">
            <div class="video-slot"><iframe id="playerA"></iframe></div>
            <div class="video-slot"><iframe id="playerB"></iframe></div>
        </div>
        <div id="chat-sidebar">
            <div id="chat-label">SELECIONE UMA LIVE</div>
            <iframe id="main-chat"></iframe>
        </div>
    </div>

    <script>
        let idA = "";
        let idB = "";

        function extrairID(url) {
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
            const match = url.match(regex);
            return (match && match[1]) ? match[1] : null;
        }

        function iniciar() {
            idA = extrairID(document.getElementById('linkA').value);
            idB = extrairID(document.getElementById('linkB').value);

            if (idA) document.getElementById('playerA').src = `https://www.youtube.com/embed/${idA}?autoplay=1&mute=0&rel=0`;
            if (idB) document.getElementById('playerB').src = `https://www.youtube.com/embed/${idB}?autoplay=1&mute=1&rel=0`;
            
            trocarChat(1);
        }

        function trocarChat(num) {
            const chatFrame = document.getElementById('main-chat');
            const label = document.getElementById('chat-label');
            const targetID = (num === 1) ? idA : idB;
            
            // Ajuste para rodar localmente ou no servidor
            const domain = window.location.hostname || "localhost";

            document.getElementById('cBtn1').classList.toggle('active', num === 1);
            document.getElementById('cBtn2').classList.toggle('active', num === 2);

            if (targetID) {
                chatFrame.src = `https://www.youtube.com/live_chat?v=${targetID}&embed_domain=${domain}`;
                label.innerText = `EXIBINDO CHAT DA LIVE ${num}`;
            }
        }
    </script>
</body>
</html>